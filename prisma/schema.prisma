generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["public"]
}

model applications {
  id                String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at        DateTime @default(now()) @db.Timestamptz(6)
  updated_at        DateTime @default(now()) @db.Timestamptz(6)
  full_name         String
  mobile_number     String
  email             String?
  city              String?
  ip            String?  @db.VarChar(64)
  user_agent    String?  @db.VarChar(512)
  product_category  String
  product_type      String
  application_stage String   @default("started")
  status            String   @default("new")
  source            String   @default("website")
  metadata          Json?    @default("{}")

  @@schema("public")
}

model contact_messages {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at    DateTime @default(now()) @db.Timestamptz(6)
  full_name     String
  email         String
  mobile_number String
  city          String?
  state         String?
  ip            String?  @db.VarChar(64)
  user_agent    String?  @db.VarChar(512)
  message       String
  subject       String?
  reason        String?
  status        String?  @default("new")

  @@schema("public")
}

model profiles {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id    String    @unique @db.Uuid
  full_name  String?
  email      String?
  phone      String?
  address    String?
  photo_url  String?
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)

  @@index([user_id], map: "idx_profiles_user_id")
  @@schema("public")
}

enum user_role {
  user
  admin

  @@schema("public")
}
